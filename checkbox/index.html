<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Hold Shift to Check Multiple Checkboxes</title>
  </head>
  <body>
    <style>
      html {
        font-family: sans-serif;
        background: #ffc600;
      }

      .inbox {
        max-width: 400px;
        margin: 50px auto;
        background: white;
        border-radius: 5px;
        box-shadow: 10px 10px 0 rgba(0, 0, 0, 0.1);
      }

      .item {
        display: flex;
        align-items: center;
        border-bottom: 1px solid #f1f1f1;
      }

      .item:last-child {
        border-bottom: 0;
      }

      input:checked + p {
        background: #f9f9f9;
        text-decoration: line-through;
      }

      input[type="checkbox"] {
        margin: 20px;
      }

      p {
        margin: 0;
        padding: 20px;
        transition: background 0.2s;
        flex: 1;
        font-family: "helvetica neue";
        font-size: 20px;
        font-weight: 200;
        border-left: 1px solid #d1e2ff;
      }

      /* æ·»åŠ ä¸€äº›è§†è§‰åé¦ˆ */
      .item:hover {
        background: #f5f5f5;
      }

      .instructions {
        max-width: 400px;
        margin: 20px auto;
        padding: 20px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 5px;
        font-family: "helvetica neue";
      }

      .instructions h3 {
        margin-top: 0;
        color: #333;
      }

      .instructions ul {
        padding-left: 20px;
      }

      .instructions li {
        margin: 8px 0;
        color: #666;
      }
    </style>

    <div class="instructions">
      <h3>ğŸ“§ Gmailé£æ ¼å¤šé€‰åŠŸèƒ½</h3>
      <ul>
        <li>ğŸ–±ï¸ å•å‡»å¤é€‰æ¡†ï¼šé€‰ä¸­/å–æ¶ˆé€‰ä¸­</li>
        <li>âŒ¨ï¸ Shift+ç‚¹å‡»ï¼šé€‰ä¸­ä¸¤ä¸ªå¤é€‰æ¡†ä¹‹é—´çš„æ‰€æœ‰é¡¹ç›®</li>
        <li>ğŸ”„ æ”¯æŒä»ä¸Šåˆ°ä¸‹æˆ–ä»ä¸‹åˆ°ä¸Šé€‰æ‹©</li>
        <li>âœ¨ ç¬¬ä¸‰æ¬¡åŠä»¥åçš„Shifté€‰æ‹©ä¼šæ™ºèƒ½å¤„ç†å·²é€‰ä¸­çš„é¡¹ç›®</li>
      </ul>
    </div>

    <!--
   The following is a common layout you would see in an email client.

   When a user clicks a checkbox, holds Shift, and then clicks another checkbox a few rows down, all the checkboxes inbetween those two checkboxes should be checked.

  -->
    <div class="inbox">
      <div class="item">
        <input type="checkbox" />
        <p>This is an inbox layout.</p>
      </div>
      <div class="item">
        <input type="checkbox" />
        <p>Check one item</p>
      </div>
      <div class="item">
        <input type="checkbox" />
        <p>Hold down your Shift key</p>
      </div>
      <div class="item">
        <input type="checkbox" />
        <p>Check a lower item</p>
      </div>
      <div class="item">
        <input type="checkbox" />
        <p>Everything inbetween should also be set to checked</p>
      </div>
      <div class="item">
        <input type="checkbox" />
        <p>Try do it without any libraries</p>
      </div>
      <div class="item">
        <input type="checkbox" />
        <p>Just regular JavaScript</p>
      </div>
      <div class="item">
        <input type="checkbox" />
        <p>Good Luck!</p>
      </div>
      <div class="item">
        <input type="checkbox" />
        <p>Don't forget to tweet your result!</p>
      </div>
    </div>

    <script>
      // è·å–æ‰€æœ‰å¤é€‰æ¡†
      const checkboxes = document.querySelectorAll(
        '.inbox input[type="checkbox"]'
      );
      let lastChecked; // è®°å½•ä¸Šæ¬¡ç‚¹å‡»çš„å¤é€‰æ¡†

      function handleCheck(e) {
        console.log("ç‚¹å‡»äº†å¤é€‰æ¡†:", this);

        // æ£€æŸ¥æ˜¯å¦æŒ‰ä½äº† Shift é”®å¹¶ä¸”ä¹‹å‰æœ‰é€‰ä¸­è¿‡å¤é€‰æ¡†
        if (e.shiftKey && lastChecked && lastChecked !== this) {
          console.log("Shift + ç‚¹å‡»æ£€æµ‹åˆ°ï¼");

          // å°† NodeList è½¬æ¢ä¸ºæ•°ç»„ä»¥ä¾¿ä½¿ç”¨ indexOf
          const checkboxArray = Array.from(checkboxes);

          // æ‰¾åˆ°ä¸Šæ¬¡ç‚¹å‡»å’Œå½“å‰ç‚¹å‡»çš„å¤é€‰æ¡†ç´¢å¼•
          const lastIndex = checkboxArray.indexOf(lastChecked);
          const currentIndex = checkboxArray.indexOf(this);

          console.log(`èŒƒå›´: ${lastIndex} åˆ° ${currentIndex}`);

          // ç¡®å®šé€‰æ‹©èŒƒå›´çš„å¼€å§‹å’Œç»“æŸä½ç½®
          const start = Math.min(lastIndex, currentIndex);
          const end = Math.max(lastIndex, currentIndex);

          // è·å–å½“å‰ç‚¹å‡»å¤é€‰æ¡†çš„çŠ¶æ€
          const shouldCheck = this.checked;

          // é€‰ä¸­/å–æ¶ˆé€‰ä¸­èŒƒå›´å†…çš„æ‰€æœ‰å¤é€‰æ¡†
          for (let i = start; i <= end; i++) {
            checkboxArray[i].checked = shouldCheck;
          }

          console.log(
            `å·²${
              shouldCheck ? "é€‰ä¸­" : "å–æ¶ˆé€‰ä¸­"
            }ä» ${start} åˆ° ${end} çš„æ‰€æœ‰é¡¹ç›®`
          );
        }

        // æ›´æ–°æœ€åç‚¹å‡»çš„å¤é€‰æ¡†
        lastChecked = this;
      }

      // ä¸ºæ¯ä¸ªå¤é€‰æ¡†æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
      checkboxes.forEach((checkbox) => {
        checkbox.addEventListener("click", handleCheck);
      });

      // æ·»åŠ é”®ç›˜æç¤º
      document.addEventListener("keydown", (e) => {
        if (e.shiftKey) {
          document.body.style.cursor = "crosshair";
        }
      });

      document.addEventListener("keyup", (e) => {
        if (!e.shiftKey) {
          document.body.style.cursor = "default";
        }
      });

      // æ§åˆ¶å°æç¤º
      console.log("ğŸ“§ Gmailé£æ ¼å¤šé€‰å¤é€‰æ¡†å·²åŠ è½½ï¼");
      console.log("ğŸ¯ ä½¿ç”¨æ–¹æ³•ï¼š");
      console.log("1. å•å‡»ä»»æ„å¤é€‰æ¡†é€‰ä¸­å®ƒ");
      console.log("2. æŒ‰ä½ Shift é”®ç‚¹å‡»å¦ä¸€ä¸ªå¤é€‰æ¡†");
      console.log("3. ä¸¤ä¸ªå¤é€‰æ¡†ä¹‹é—´çš„æ‰€æœ‰é¡¹ç›®éƒ½ä¼šè¢«é€‰ä¸­/å–æ¶ˆé€‰ä¸­");
      console.log("4. æ”¯æŒä»ä¸Šåˆ°ä¸‹æˆ–ä»ä¸‹åˆ°ä¸Šçš„é€‰æ‹©");
    </script>
  </body>
</html>
